@using System.Diagnostics
@using ForestFires.Controllers
@using ForestFires.Models;
@{
    Layout = "";
}
@model List<Sensor>
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="~/lib/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="~/js/site.js"></script>
    <link href="~/css/header.css" rel="stylesheet" />
    <link href="~/css/status.css" rel="stylesheet" />
    <link href="~/css/map.css" rel="stylesheet" />
    <link href="~/css/footert.css" rel="stylesheet" />
    <link href="~/css/sensors.css" rel="stylesheet" />
    <link href="~/css/weather.css" rel="stylesheet" />
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <style>
        /* Always set the map height explicitly to define the size of the  div
        * element that contains the map. */
        #map {
            height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            font-family: "Segoe UI";
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-style">
            <div id="site-name">
                <div id="image-svg">
                    <img src="~/images/logo.png" alt="Alternate Text" />
                </div>
                <div id="site-text">
                    Fire Monitor
                </div>
            </div>
            <div id="search-block">
                <div id="search-string">
                    <input id="input-text" type="text" name="name" value="Sample Text" />
                </div>
                <div id="search-icon">
                    <a id="find" href="#"><img src="~/images/search.png" alt="Alternate Text" /></a>
                </div>
            </div>
            <hr>
        </div>
    </header>
    <status>
        <div class="status-block">
            <div class="status-images">
                <img src="~/images/status-normal.png" alt="Status-normal" />
            </div>
            <div class="status-text">
                Normal
            </div>
        </div>

    </status>
    <google-map>
        <div id="map-block">
            <div id="map"></div>
            <div id="data-block">
                <div id="tempherature">
                    <div id="degrees">25°C</div>
                    <div id="feels-like">feels like 22°C</div>
                </div>
                <div id="weather-img">
                    <img class="img-about" id="img-weather" src="~/images/weather.png" alt="Alternate Text" />
                </div>
                <div id="about-info">
                    <b>Humindity</b><br />
                    30 % <br />

                    <b>Wind direction, speed & gust (mph)</b><br />
                    NW  ☺ 20 <br />
                    <b>Smoke (ppm)</b><br />
                    0.015 %
                </div>
                <div id="about-info-img">
                    <div class="info-group" id="info-group-1">
                        <div class="blue-phone-about" id="blue-phone-about-1"></div>
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             width="50" height="50" viewBox="0 0 490.357 490.357" class="img-about" style="enable-background:new 0 0 490.357 490.357;"
                             xml:space="preserve">
<g>
                        <g>
                        <path d="M405.759,210.258l-25.515-52.016l2.825,57.877c2.149,43.404-17.9,67.446-34.132,79.696
			c6.014-44.63,11.269-139.524-36.899-210.083c-30.115-44.099-76.006-71.084-136.441-80.21L139.083,0l26.361,25.876
			c31.453,30.874,47.45,63.552,47.544,97.153c0.046,19.384-5.249,36.719-11.823,50.76c-1.57-24.516-10.323-52.173-38.447-67.371
			l-18.998-10.258l1.366,21.533c3.105,49.079-17.854,79.031-40.059,110.751c-22.42,32.024-45.593,65.129-41.313,116.848
			c7.304,88.29,61.544,137.007,161.22,144.795c2.307,0.188,4.712,0.27,7.164,0.27c51.076,0,128.027-38.71,168.407-103.518
			C423.975,349.227,443.919,288.027,405.759,210.258z M232.109,466.454c-0.549,0-1.051-0.047-1.576-0.059
			c1.576-0.035,3.001-0.059,4.35-0.07C233.971,466.348,233.008,466.454,232.109,466.454z M380.233,374.205
			c-32.591,52.289-93.335,86.188-136.786,91.455c47.105-14.701,73.788-192.089-22.542-220.762
			c25.409,44.099-13.522,85.342-47.111,105.345c-33.589,20.003-56.249,38.827-42.546,81.845c0.502,1.576,1.256,2.932,1.927,4.367
			c-27.202-20.365-42.113-51.041-45.593-93.125c-3.579-43.111,16.167-71.312,37.057-101.158
			c18.648-26.63,39.334-56.202,43.807-98.251c16.768,28.025,4.974,71.528,4.823,72.065l-12.057,43.165l31.954-31.4
			c1.781-1.757,43.748-43.713,43.737-104.458c-0.012-29.847-10.089-58.689-30.01-86.095c36.555,11.683,65.164,32.433,85.354,61.953
			c57.884,84.659,29.392,215.058,29.1,216.389l-4.636,20.528l20.015-6.562c0.572-0.187,45.307-15.46,63.173-64.049
			C409.519,312.128,395.787,349.227,380.233,374.205z" />
                        <path d="M339.188,72.643c6.037,8.957,9.05,16.751,11.011,27.044c1.951,10.299,7.497,32.381,7.497,32.381l9.295-31.026
			c7.905-28.189-2.113-52.139-29.484-60.674l-43.544-8.513c0,0,16.196,13.51,25.328,20.254
			C323.879,55.483,333.139,63.687,339.188,72.643z" />
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
                        
                    </div>
                    <div class="info-group" id="info-group-2">
                        <div class="blue-phone-about" id="blue-phone-about-2"></div>
                        <svg fill="#000000" height="50" viewBox="0 0 24 24" width="50" xmlns="http://www.w3.org/2000/svg" class="img-about">
                            <path d="M0 0h24v24H0z" fill="none" />
                            <path d="M14 4l2.29 2.29-2.88 2.88 1.42 1.42 2.88-2.88L20 10V4zm-4 0H4v6l2.29-2.29 4.71 4.7V20h2v-8.41l-5.29-5.3z" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </google-map>

    <section id="weather">
        <div id="weather-div">
            <div class="head-block">
                <div id="title-div">
                    <p>Weather statistic</p>
                </div>
                <div class="buttons" id="month" onmouseover="changeTo(this)" onmouseout="changeBack(this)" onclick="stayOn(this)">
                    <a>
                        <div>
                            1 month
                        </div>
                    </a>
                </div>
                <div class="buttons" id="ten-days" onmouseover="changeTo(this)" onmouseout="changeBack(this)" onclick="stayOn(this)">
                    <a>
                        <div>
                            10 day
                        </div>
                    </a>
                </div>
                <div class="buttons" id="five-days" onmouseover="changeTo(this)" onmouseout="changeBack(this)" onclick="stayOn(this)">
                    <a>
                        <div>
                            5 day
                        </div>
                    </a>
                </div>
                <hr />
            </div>
            <div id="weather-main-block" class="main-block">
                <div class="info-block">
                    <div class="info-block main">
                        <hr />
                        <div class="item">
                            <ul>
                                <li>Date</li>
                                <br />
                                @if (ViewBag.Weather != null)
                                {
                                    foreach (WeatherData item in ViewBag.Weather)
                                    {
                                        <li>@item.Date</li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Temperature</li>
                                <br />
                                @if (ViewBag.Weather != null)
                                {
                                    foreach (WeatherData item in ViewBag.Weather)
                                    {
                                        <li>@item.AirTemperature C</li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Humidity</li>
                                <br />
                                @if (ViewBag.Weather != null)
                                {
                                    foreach (WeatherData item in ViewBag.Weather)
                                    {
                                        <li>@item.Humidity.ToString()%</li>
                                    }
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Wind</li>
                                <br />
                                @if (ViewBag.Weather != null)
                                {
                                    foreach (WeatherData item in ViewBag.Weather )
                                    {
                                       <li>@item.WindSpeed m/s</li> 
                                    }
                                }
                            </ul>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="sensors">
        <div id="sensors-div">
            <div class="head-block">
                <p>Sensors</p>
                <hr />
            </div>
            <div class="main-block">
                <div class="info-block">
                    <div class="info-block main">
                        <hr />
                        <div class="item">
                            <ul>
                                <li>Sensor</li>
                                <br />
                                @foreach (var item in Model)
                                {
                                    <li>@item.Updated.ToShortDateString()</li>
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Temperature</li>
                                <br />
                                @foreach (var item in Model)
                                {
                                    <li>@item.Temperature.ToString() C</li>
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Humidity</li>
                                <br />
                                @foreach (var item in Model)
                                {
                                    <li>@item.Humidity.ToString()%</li>
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Smoke</li>
                                <br />
                                @foreach (var item in Model)
                                {
                                    <li>@item.Smoke.ToString() ppm</li>
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Status</li>
                                <br />
                                @foreach (var item in Model)
                                {
                                    <li>
                                        <div>
                                            @if (item.CurrentStatus == Status.Ok)
                                            {
                                                <img src="~/images/ok.png" alt="Alternate Text" />
                                            }
                                            else
                                            {
                                                <img src="~/images/ok.png" alt="Alternate Text" />
                                            }
                                        </div>
                                    </li>
                                }
                            </ul>
                        </div>
                        <div class="item">
                            <ul>
                                <li>Date</li>
                                <br />
                                @foreach (var item in Model)
                                {
                                    <li>@item.Updated.ToShortDateString()</li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer>
        <div id="footer-div">
            <div id="developers">
                <h4>Developers:</h4>
                <ul>
                    <li>Nil Luchko</li>
                    <li>Ilona Zelinko</li>
                    <li>Yaroslav Bershadsky</li>
                    <li>Bogdan Goloschapov</li>
                    <li>Dima Kuharenko</li>
                </ul>
            </div>
            <div id="contacts">
                <h4>Contacts:</h4>
                <ul>
                    <li>luchko.nil@mail.ru</li>
                    <li>i.zelinko@student.csn.khai.edu</li>
                    <li>ya.bershadskiy@hotmail.com</li>
                    <li>b.goloshapov@student.csn.khai.edu</li>
                    <li>dmitriy.kukharenko@hotmail.com</li>
                </ul>
            </div>
            <div id="nasa-logo">
                <img src="~/images/nasa.png" alt="Alternate Text" width="270px" height="220px" />
            </div>
        </div>
    </footer>
    <script>
        var isClicked="";
        function changeTo(obj)
        {
            $('#'+obj.id).css('background','white');
            $('#'+obj.id+' a').css('color','rgb( 176, 207, 0 )');
        }
        function changeBack(obj){
            if(isClicked!=obj.id)
            {
                $('#'+obj.id).css('background','none');
                $('#'+obj.id+' a').css('color','white');
            }
        }
        function stayOn(obj){
            $(".buttons").css('background','none');
            $(".buttons a").css('color','white');
            $('#'+obj.id).css('background','white');
            $('#'+obj.id+' a').css('color','rgb( 176, 207, 0 )');
            isClicked=obj.id;
        }
    </script>
    <script>
        var map;
        function initMap() {
            var uluru = { lat: 50.008189, lng: 36.242334 };
            map = new google.maps.Map(document.getElementById('map'),
            {
                zoom: 20,
                center: uluru,
                mapTypeId: 'hybrid'
            });
            @foreach (var sensor in Model)
                {
                    <text>
                        var marker = new google.maps.Marker({
                            position: { lat: @sensor.Lattitude, lng: @sensor.Longtitude },
                            map: map,
                            title: '@sensor.Info'
                        });
                    </text>
                }
        }


    </script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-Ft9IBQZDBxxuuJhm5kJmm0o8-mHJ7ZU&callback=initMap"
        type="text/javascript"></script>
<script>
    $(document).ready(function() {
        var url = '@Url.Action("StartThread")';
        debugger;
        $.ajax({
            url: url,
            dataType: "json",
            method: "GET",
            success: function () {
                console.log("success");
            }
        });
    });
</script>

</body>
</html>